Manual deployment
-------------------------
 copy all to a temp dir
 remove unwanted items
   .git, .settings, .classpath, .project, README.md
   /dev dir can be removed
 cross-origin server
    change url for the server, from localhost to the domain
    js/util.js
 switch to server version of web.xml
   review/edit web.xml settings
 zip all into a war file, copy ROOT.war to C:\temp2 
   size ~ 893 kb (with no dev dir)
   
 
-------------------------------------
Maintenance - Monthly (about 20 minutes)
-------------------------------------

Comets 
  in ephem.js
  pick comets using BAA comet section
    https://www.ast.cam.ac.uk/~jds/
    peak mag <= 12, and whose elong from the sun at peak > x
  orbital elements:
    http://ssd.jpl.nasa.gov/sbdb.cgi#top   

IMP: if text is changed in English, you need to change it in French too. Best to do it right away.

------------------------------------- 
Maintenance - Yearly (about 3 hours)
-------------------------------------

ephem.js
  Edit this line: var when_fixed_equinox = when("J2018.5");


Messier objects
 apply precession from J2000 to the current year
 http://localhost:8081/astro/dev/messier_precess/form.html 
 put the result in ephem.js, update comments therein
   see: var build_messiers
 
 
Caldwell objects 
 apply precession from J2000 to the current year
 WARNING: I am inlining the base J2000 data in caldwell_precess/code.js; referencing doesn't work
 http://localhost:8081/astro/dev/caldwell_precess/form.html 
 put the result in ephem.js, update comments therein
   see: var build_caldwells


Yale Bright Star catalog 
 apply precession from J2000 to the current year
 http://localhost:8081/astro/dev/ybs_precess/form.html
   takes about 60s 
   if the browser hangs, edit the code.js to run in two parts
 put the result in ephem.js, update comments therein
 WATCH OUT FOR manual changes to the YBS catalog.
 Problem: α Psc is being treated as too dim. It has two dim entries in the source data.
  ybs[591]=['α Psc',0.532529,0.0482341,5.23]; //change this one to 3.82!
  ybs[592]=['α Psc',0.532529,0.0482341,4.33];
 Problem: T CrB is a nova, shouldn't really be there 
  ybs[5948]=['',4.1866231,0.4523942,6.33]; //manually change from 2.0! 
In the Bobcaygeon Constellations project, I coded about 20 or so such mods to the underlying catalog data, 
mostly for consolidating multiple stars into a single item of equivalent magnitude.

Planet orbits
  pairs of osculating orbits (Earth excluded)
  Observer's Handbook, p23
  edit ephem.js directly
  Careful: for fast movers, L0 can go around N times between a and b. 
  That needs to be factored in, since the overall rate of change is calculated.
  If the RASC Observer's Handbook is not available, leaving this out for a few years won't make 
  much difference in the positions.
  

Asteroid orbits - update
  http://ssd.jpl.nasa.gov/sbdb.cgi#top
  edit ephem.js directly
  
    
Sky Diary - Daily Phenomena
  MICA software
  "C:\Program Files (x86)\U.S. Naval Observatory\MICA\MICA2.exe"
  Calculate -> Phenomena -> Search -> full year + 1 month, use UT1
     It takes about 60s
     File -> Save as: %astro%\dev\sky_diary\phenomena.mws
     File -> Export as ascii: %astro%\dev\sky_diary\phenomena.txt
  Open in Notepad and re-save as UTF-8 (to be safe). 
     %astro%\dev\sky_diary\phenomena_utf8.txt [this is the input file for the parser]
  Run SkyDiary.java
    %astro%\dev\sky_diary>C:\jdk1.6.0\bin\javac -encoding "UTF-8" -cp . SkyDiary.java
    %astro%\dev\sky_diary>C:\jdk1.6.0\bin\java SkyDiary
  Output
    %astro%\dev\sky_diary\phenomena.js
  ephem.js: replace the 'all_events' object 
  Add manually: eclipses (just add text to the existing new/full Moon entry)


Occultations
  occult.exe v4 software from IOTA
    C:\Program Files (x86)\occult\Occult.exe
    Occult > Lunar predictions > Predictions of multiple objects for multiple sites
    use the ZC catalog only! (otherwise wacky interference between dates and star names)
    limiting mag: no more than 6.0 (RASC has 5.9)
    sites: use the 'John' site file, to use my list of 'standard' sites
    select: ALL sites in the 'John' set
    dates: do at least 13 months at a time (till end of year + 1 month)
    remove the old output files:  
       all the directories in 'C:\Program Files (x86)\occult\AutoGenerated Lunar'
    generate: 'Compute Occultations' will generate the files
    view: new output in 'C:\Program Files (x86)\occult\AutoGenerated Lunar'
    custom list of sites that I use:
    C:\Program Files (x86)\occult\Sites\John.site
    can be edited manually (the tool's UI for editing the file is confusing.)
  OccultationParser.java
    generate the js object
      %astro\dev\occultation>C:\jdk1.6.0\bin\javac -encoding "UTF-8" -cp . OccultationParser.java
      %astro\dev\occultation>C:\jdk1.6.0\bin\java OccultationParser
   replace the content of %astro%\main\occultations.js

  
Jupiter Satellite Phenomena
  Occult software; No mutual phenomena. Select Jupiter only. Export to:
    %astro\dev\jupiter_satellite_phenom\jupiter_satellite_phenomena.txt
  Resave in Notepad to:    
    %astro\dev\jupiter_satellite_phenom\jupiter_atellite_phenomena_utf8.txt
  Generates to: %astro\dev\jupiter_satellite_phenom\jupiter_satellite_phenomena.js
    %astro\dev\jupiter_satellite_phenom>C:\jdk1.6.0\bin\javac -encoding "UTF-8" -cp . JupiterSatellitePhenomena.java
    %astro\dev\jupiter_satellite_phenom>C:\jdk1.6.0\bin\java JupiterSatellitePhenomena
   replace the content of %astro%\main\jupiter_satellite_phenomena.js

     
Saturn
  ephem.js: FUDGE_FACTOR_FOR_MISSING_RINGS
  if still needed, review the fudge-factor used to get better apparent magnitudes for Saturn.     

Radar stations
Check each location once. See if it looks normal. 
Environment Canada is slowly updating radar stations across Canada.
When that happens, the id for the radar station needs to be updated.
The file with the data:
  dev\station_links\cda_links.csv
  Places with no radar:
   Fort Mac, Jasper
   Cranbrook, Terrace
   Churchill, The Pas, Thompson
   La Ronge
   Happy Valley-Goose Bay
   Whitehorse
  
Git reminders

Initial setup
# go to your github.com account, and create your empty repo
 
# init a local repo (empty)
git init

# put your local files into the local repo (recursive, the whole tree)
# the directory name must match the repo name on github!
git add .

# commit to the local repo
git commit -m "initial commit"

# now link with the remote repo
git remote add origin https://github.com/johanley/bobcaygeon.git

# fetch and push
git remote -v

# push local commits to the remote, and you're now done!
git push -f origin master

-------------------------------------------------

Day to day use, after initial setup
 git status
 git commit -a -m "astuha"
 git pull origin master
 git push origin master
 git add -- adds to staging
 git checkout a.txt -- revert  